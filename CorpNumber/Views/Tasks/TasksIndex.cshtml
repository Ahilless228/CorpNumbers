@model IEnumerable<CorpNumber.Models.TaskItem>

@{
    var incompleteTasks = Model.Where(t => t.Complete != true)
                               .OrderBy(t => t.TaskDate)
                               .ToList();
    var completeTasks = Model.Where(t => t.Complete == true)
                             .OrderBy(t => t.TaskDate)
                             .ToList();
    var allTasks = incompleteTasks.Concat(completeTasks).ToList();
    var incompleteCount = incompleteTasks.Count;
}

<div class="container mt-4">
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h4 class="fw-bold">Задачи/Напоминания</h4>
        <img src="~/images/altynken-logo.jpg" style="height: 35px;" />
    </div>

    <!-- Buttons -->
    <div class="mb-3 d-flex gap-2 flex-wrap">
        <button class="btn btn-primary">Добавить задачу</button>
        <button class="btn btn-warning">Изменить задачу</button>
        <button class="btn btn-danger">Удалить задачу</button>
    </div>

    <!-- Table -->
    <div class="table-responsive" style="max-height: 500px; overflow-y: auto;">
        <table class="table table-bordered table-sm text-center align-middle">
            <thead class="table-light">
                <tr>
                    <th>Дата создания</th>
                    <th>Дата выполнения</th>
                    <th>Задача/Напоминание</th>
                    <th>Выполнено</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var task in allTasks)
                {
                    var rowClass = task.Complete == true ? "table-success" : "";
                    <tr class="@rowClass">
                        <td>@task.CreateDate?.ToString("dd.MM.yyyy")</td>
                        <td>@task.TaskDate?.ToString("dd.MM.yyyy")</td>
                        <td class="text-start">@task.TaskText</td>
                        <td>@(task.Complete == true ? "Да" : "Нет")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Summary -->
    <div class="mt-3">
        <strong>Количество невыполненных задач:</strong> @incompleteCount
    </div>
</div>
